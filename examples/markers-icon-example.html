<!DOCTYPE html>
<html ng-app="demoapp">
  <head>
    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="../src/angular-leaflet-directive.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
    <![endif]-->
    <script>
        angular.module("demoapp", ["leaflet-directive"]);
        function DemoController($scope) {
            var local_icons = {
                leaf_icon: L.icon({
                    iconUrl: 'img/leaf-green.png',
                    shadowUrl: 'img/leaf-shadow.png',

                    iconSize:     [38, 95], // size of the icon
                    shadowSize:   [50, 64], // size of the shadow
                    iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
                    shadowAnchor: [4, 62],  // the same for the shadow
                    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
                }),
                default_icon: L.icon({
                    iconUrl: 'http://cdn.leafletjs.com/leaflet-0.6.4/images/marker-icon.png',
                    shadowUrl: 'http://cdn.leafletjs.com/leaflet-0.6.4/images/marker-shadow.png',

                    iconSize: [25, 41],
                    iconAnchor: [12, 40],
                    popupAnchor: [0, -40],

                    shadowSize: [41, 41],
                    shadowAnchor: [12, 40]
                }),
                div_icon: L.divIcon({
                	iconSize: [200, 0],
                	html: 'Using <strong>Bold text as an icon</strong>:',
                	popupAnchor:  [0, 0]
                }),
                object_icon: {
                    iconUrl: 'http://leafletjs.com/docs/images/leaf-orange.png',
                	shadowUrl: 'http://leafletjs.com/docs/images/leaf-shadow.png',
                	iconSize:     [38, 95],
                    shadowSize:   [50, 64],
                    iconAnchor:   [22, 94],
                    shadowAnchor: [4, 62]
                },
            }

            angular.extend($scope, {
                icons: local_icons
            });

            angular.extend($scope, {
                london: {
                    lat: 51.505,
                    lng: -0.09,
                    zoom: 8
                },
                markers: {
                    m1: {
                        lat: 51.505,
                        lng: -0.09,
                        message: "I'm a static marker",
                        icon: local_icons.default_icon,
                    },
                }
            });

        };
    </script>
  </head>
  <body ng-controller="DemoController">
      <leaflet center="london" markers="markers" height="480px" width="640px">
      </leaflet>

      <p>change your icon here:</p>
      <select ng-model="markers.m1.icon" ng-options="key for (key, val) in icons">
      </select>

  </body>
</html>
